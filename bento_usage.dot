digraph bento_pipeline {
  subgraph taste_workflow {
    bgcolor=blue;
    color=blue;
    style=filled;

    labelloc = b;
    label="taste_workflow";
    "!taste trigger from github";
    "jenkins_job";
    "payload_processor";
    "linter";
    "image_builder";
    "deploy";
    "openstack_taster";
  }

  subgraph deploy_workflow {
    color=green;
    style=filled;
    "!deploy trigger from github";
    "deploy";
  }

  "!taste trigger from github" -> "jenkins_job";
  
  "jenkins_job" -> "payload_processor";
  
  edge [label="images_affected,\n arch,\n pr#"]
  "payload_processor" ->  "linter";
   
  "linter" -> "image_builder" ;

  "image_builder" -> "deploy" -> "openstack_taster";

  edge [label="tasting result\n also stored as artifact"];
  "openstack_taster" -> "!taste trigger from github";
  
  //edge [label="testing\n success_results\n failure_results"];
  //"deploy" -> "image_builder"
  
  edge [label=production];
  "!deploy trigger from github" -> "deploy";
  edge [label=""];
  "deploy" -> "!deploy trigger from github";

  "!taste trigger from github" [color=red];
  "!deploy trigger from github" [color=green];
  "deploy" [tooltip="stores results as artifacts for reuse"];
}
